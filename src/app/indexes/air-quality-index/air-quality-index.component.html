<div style="text-align: right; margin-top: 20px; margin-right: 20px">
  <button mat-raised-button color="primary" (click)="ExportTOExcel()">
    Export as Excel
  </button>
</div>

<form class="date-block" [formGroup]="filterForm">
  <div class="date-block__list">
    <mat-form-field>
      <input
        matInput
        [matDatepicker]="fromDate"
        placeholder="From Date"
        formControlName="fromDate"
      />
      <mat-datepicker-toggle matSuffix [for]="fromDate"></mat-datepicker-toggle>
      <mat-datepicker #fromDate></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="date-block__list">
    <mat-form-field>
      <input
        matInput
        [matDatepicker]="toDate"
        placeholder="To Date"
        formControlName="toDate"
      />
      <mat-datepicker-toggle matSuffix [for]="toDate"></mat-datepicker-toggle>
      <mat-datepicker #toDate></mat-datepicker>
    </mat-form-field>
  </div>
  <button
    style="margin-top: 10px"
    mat-raised-button
    color="primary"
    (click)="applyFilter()"
  >
    Submit
  </button>
</form>

<mat-card style="width: 75%; margin-left: 200px; margin-top: 20px" #TABLE>
  <table mat-table matSort [dataSource]="dataSource" #table>
    <ng-container matColumnDef="entry_id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
      <td mat-cell *matCellDef="let row">{{ row.entry_id }}</td>
    </ng-container>

    <ng-container matColumnDef="created_at">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Date</th>
      <td mat-cell *matCellDef="let row">{{ row.created_at }}</td>
    </ng-container>
    <!-- | date :'short' -->
    <ng-container matColumnDef="field4">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Value</th>
      <td mat-cell *matCellDef="let row">{{ row.field4 }}</td>
    </ng-container>

    <ng-container matColumnDef="imageUrl">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let row">
        <img
          *ngIf="+row.field4 >= 0 && +row.field4 < 50"
          src="/assets/images/good.jpg"
        />
      </td>
      <td mat-cell *matCellDef="let row">
        <img
          *ngIf="+row.field4 > 50 && +row.field4 < 100"
          src="/assets/images/moderate.jpg"
        />
      </td>
      <td mat-cell *matCellDef="let row">
        <img
          *ngIf="+row.field4 > 100 && +row.field4 < 150"
          src="/assets/images/unhealthy_forSensitiveGroups.jpg"
        />
      </td>
      <td mat-cell *matCellDef="let row">
        <img
          *ngIf="+row.field4 > 150 && +row.field4 < 200"
          src="/assets/images/unhealthy.jpg"
        />
      </td>
      <td mat-cell *matCellDef="let row">
        <img
          *ngIf="+row.field4 > 200 && +row.field4 < 300"
          src="/assets/images/very_unhealthy.jpg"
        />
      </td>
      <td mat-cell *matCellDef="let row">
        <img *ngIf="+row.field4 > 300" src="/assets/images/hazardous.jpg" />
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator
    [pageSizeOptions]="[5, 10, 25, 100]"
    aria-label="Select page of users"
  ></mat-paginator>
</mat-card>
